<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MoodTags • Sapphic</title>

  <!-- PWA: leave these as-is if you already had them -->
  <link rel="manifest" href="/manifest.webmanifest">
  <meta name="theme-color" content="#111111"/>

  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  <header class="topbar">
    <h1>mood tags • sapphic</h1>
    <div class="install-wrapper">
      <button id="installBtn" class="secondary" hidden>Install app</button>
    </div>
  </header>

  <main class="container">
    <section class="panel">
      <h2>Room & identity</h2>
      <div class="grid-2">
        <label class="block">
          <span>Room ID</span>
          <input id="roomId" placeholder="e.g. tai-josie" />
        </label>
        <label class="block">
          <span>Your name</span>
          <input id="userName" placeholder="e.g. Josie" />
        </label>
      </div>
      <button id="connectBtn">Connect</button>
      <p id="connState" class="muted"></p>
    </section>

    <section class="panel">
      <h2>Subreddits</h2>
      <p class="muted">Pick one or more. You can also add your own.</p>
      <div id="subredditList" class="sub-grid"></div>

      <div class="add-row">
        <input id="customSub" placeholder="Add subreddit, e.g. GWASapphic" />
        <button id="addSubBtn" class="secondary">Add</button>
      </div>
    </section>

    <section class="panel">
      <h2>Tags</h2>
      <p class="muted">Tap a tag to cycle: <span class="pill required">required</span> → <span class="pill optional">optional</span> → <span class="pill excluded">excluded</span> → off.</p>

      <div id="categories"></div>
    </section>

    <section class="panel">
      <h2>Selected</h2>
      <div class="selected-wrap">
        <div>
          <h3>Required</h3>
          <div id="reqList" class="chips"></div>
        </div>
        <div>
          <h3>Optional</h3>
          <div id="optList" class="chips"></div>
        </div>
        <div>
          <h3>Excluded</h3>
          <div id="exList" class="chips"></div>
        </div>
      </div>
    </section>

    <section class="panel">
      <h2>Search</h2>
      <div class="grid-2">
        <label class="block">
          <span>Sort</span>
          <select id="sortSel">
            <option value="new">New</option>
            <option value="relevance">Relevance</option>
            <option value="top">Top</option>
            <option value="comments">Comments</option>
          </select>
        </label>
        <label class="block">
          <span>Time range</span>
          <select id="timeSel">
            <option value="all">All time</option>
            <option value="year">Past year</option>
            <option value="month">Past month</option>
            <option value="week">Past week</option>
            <option value="day">Past day</option>
            <option value="hour">Past hour</option>
          </select>
        </label>
      </div>

      <button id="openCombined">Open combined results</button>
      <div id="linkList" class="links"></div>
      <p class="muted small">Combined search opens <code>/r/subA+subB/search</code> with your tag logic. If anything acts weird, use the individual links below.</p>
    </section>
  </main>

  <footer class="muted center small">
    Built with ❤️ for Josie & Tai. Live-sync via Supabase.
  </footer>

  <script type="module" src="/script.js"></script>
</body>
</html>
